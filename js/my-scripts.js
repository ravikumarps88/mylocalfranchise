$(document).ready(function(){$(document).on('click','.add-to-request-list a',function(){$this=$(this);if($(this).find('i').hasClass('fa-check-square-o')){$.post("submit.php?action=remove_from_request_list&franchise_id="+$(this).find('i').attr('id'),function(data){if(data.login==false)$(".sign-in").trigger('click');else{$this.find('i').toggleClass('fa-check-square-o fa-square-o');refreshRequestList();}},"json");}else{$.post("submit.php?action=add_to_request_list&franchise_id="+$(this).find('i').attr('id'),function(data){if(data.login==false)$(".sign-in").trigger('click');else{$this.find('i').toggleClass('fa-square-o fa-check-square-o');refreshRequestList();}},"json");}});$(document).on('click','.add_request_list',function(){$this=$(this);if($(this).find('i').hasClass('fa-heart')){$.post("submit.php?action=remove_from_request_list&franchise_id="+$(this).attr('id'),function(data){if(data.login==false)$(".sign-in").trigger('click');else{$('#add_remove_button,#add_remove_button2').html('Add to Request List');$('#add_remove_button,#add_remove_button2').toggleClass('remove_request_list_button add_request_list_button');refreshRequestList();$this.find('i').toggleClass('fa-heart fa-heart-o');}},"json");}else{$.post("submit.php?action=add_to_request_list&franchise_id="+$(this).attr('id'),function(data){if(data.login==false)$(".sign-in").trigger('click');else{$('#add_remove_button,#add_remove_button2').html('Remove');$('#add_remove_button,#add_remove_button2').toggleClass('add_request_list_button remove_request_list_button');refreshRequestList();$this.find('i').toggleClass('fa-heart-o fa-heart');}},"json");}});$(document).on('click','.add_request_list_button',function(){$this=$(this);if($(this).find('i').hasClass('remove_request_list_button')){$.post("submit.php?action=remove_from_request_list&franchise_id="+$(this).attr('val'),function(data){if(data.login==false)$(".sign-in").trigger('click');else{$this.toggleClass('add_request_list_button remove_request_list_button');$('.add_request_list').find('i').toggleClass('fa-heart fa-heart-o');$this.html('Add to Request List');refreshRequestList();}},"json");}else{$.post("submit.php?action=add_to_request_list&franchise_id="+$(this).attr('val'),function(data){if(data.login==false)$(".sign-in").trigger('click');else{$this.toggleClass('add_request_list_button remove_request_list_button');$('.add_request_list').find('i').toggleClass('fa-heart-o fa-heart');$this.html('Remove');if($this.attr('id')!='add_remove_button'){$('#add_remove_button').toggleClass('add_request_list_button remove_request_list_button ');$('#add_remove_button').html("Remove");}else{$('#add_remove_button2').toggleClass('add_request_list_button remove_request_list_button ');$('#add_remove_button2').html("Remove");}refreshRequestList();}},"json");}});$(document).on('click','.remove_request_list_button',function(){$this=$(this);if($(this).find('i').hasClass('add_request_list_button')){$.post("submit.php?action=add_to_request_list&franchise_id="+$(this).attr('val'),function(data){if(data.login==false)$(".sign-in").trigger('click');else{$this.toggleClass('remove_request_list_button add_request_list_button');$('.add_request_list').find('i').toggleClass('fa-heart-o fa-heart');$this.html('Remove');refreshRequestList();}},"json");}else{$.post("submit.php?action=remove_from_request_list&franchise_id="+$(this).attr('val'),function(data){if(data.login==false)$(".sign-in").trigger('click');else{$this.toggleClass('remove_request_list_button add_request_list_button');$('.add_request_list').find('i').toggleClass('fa-heart fa-heart-o');$this.html('Add to Request List');if($this.attr('id')!='add_remove_button'){$('#add_remove_button').toggleClass('remove_request_list_button add_request_list_button');$('#add_remove_button').html("Add to Request List");}else{$('#add_remove_button2').toggleClass('remove_request_list_button add_request_list_button');$('#add_remove_button2').html("Add to Request List");}refreshRequestList();}},"json");}});$('.removereqlist').click(function(){$.post("submit.php?action=remove_from_request_list&franchise_id="+$(this).attr('id'));});function refreshRequestList(){$('#request-list-collapse').load('submit.php?action=refresh_request_list');}$('.contact_focus').click(function(){$('html, body').stop().animate({scrollTop:$('#contactForm').offset().top-60},1500,'easeInOutExpo');});$('[data-toggle="search-toggle"]').on('click',function(){$('.fl-search-wrap').toggleClass('open');});$('[data-toggle="mobile-menu-toggle"]').on('click',function(){$('.fl-mobile-menu').toggleClass('open');});$('#loginModal').bind('hidden.bs.modal',function(){$("html").css("margin-right","0px");});$('#loginModal').bind('show.bs.modal',function(){$("html").css("margin-right","-16px");});$('[data-toggle="my-account-mobile"]').on('click',function(){$('.my-account-mobile-menu').toggleClass('open');});$("#reset_password").on('click',function(){$.post("process.php?action=reset_password&email="+$('#reset_email').val(),function(data){if(data.email==false)$("#reset_email").val('Invalid Email');else
$("#msg_reset_password").html('Password has been reset. Please check your email.');},"json");});$("#newsletter_subs").click(function(e){e.preventDefault();$.post("process.php?action=subscribe&email="+$('#newsletter_email').val(),function(data){if(data.subscribe=='invalid'){$("#err_subscribe").html('Invalid e-mail');}else if(data.subscribe==false){$("#err_subscribe").html('You have already subscribed. Thanks.');}else{$("#err_subscribe").hide();$("#subscribe-form__email").html('<p>Thank you for subscribing. You will receive an email confirmation shortly.</p>');}},"json");});$(".newsletter_subs_home").click(function(e){e.preventDefault();$.post("process.php?action=subscribe&email="+$(this).prev().val(),function(data){if(data.subscribe=='invalid'){$(".err_subscribe").show();$(".err_subscribe").html('Invalid e-mail');}else if(data.subscribe==false){$(".err_subscribe").show();$(".err_subscribe").html('You have already subscribed. Thanks.');}else{$(".err_subscribe").hide();$(".msg_subs_home").html('<p>Thank you for subscribing. You will receive an email confirmation shortly.</p>');}},"json");});$("#newsletter_subs_search").on('click',function(e){e.preventDefault();$.post("process.php?action=subscribe&email="+$('#newsletter_email_search').val(),function(data){if(data.subscribe=='invalid'){$("#err_subscribe_search").show();$("#err_subscribe_search").html('Invalid e-mail');}else if(data.subscribe==false){$("#err_subscribe_search").show();$("#err_subscribe_search").html('You have already subscribed. Thanks.');}else{$("#err_subscribe_search").show();$("#err_subscribe_search").html('<p>Thank you for subscribing. You will receive an email confirmation shortly.</p>');}},"json");});if($("#contactForm2").length){$("#contactForm2 input,#contactForm2 textarea").jqBootstrapValidation({preventSubmit:true,submitError:function($form,event,errors){$("#title").focus();},submitSuccess:function($form,event){$('#lead_submit').attr("disabled","disabled");event.preventDefault();var franchise_id=$("input#franchise_id").val();var title=$("#title").val();var firstname=$("input#firstname").val();var lastname=$("input#lastname").val();var email=$("input#email").val();var phone=$("input#phone").val();var address1=$("input#address1").val();var address2=$("input#address2").val();var best_time=$("#best_time").val();var city=$("input#city").val();var county=$("input#county").val();var postcode=$("input#postcode").val();var liquid_capital=$("#liquid_capital").val();var timeframe=$("#timeframe").val();var preferred_location=$("input#preferred_location").val();var method_contact=$("#method_contact").val();if($("input#create_account").is(":checked"))var create_account='yes';else
var create_account='no';if($("input#newsletter").is(":checked"))var newsletter='yes';else
var newsletter='no';var message=$("textarea#contact-message").val();var firstName=name;if(firstName.indexOf(' ')>=0){firstName=name.split(' ').slice(0,-1).join(' ');}$.ajax({url:"././submit.php?action=contact_franchise",type:"POST",data:{franchise_id:franchise_id,title:title,firstname:firstname,lastname:lastname,email:email,phone:phone,message:message,address1:address1,address2:address2,city:city,county:county,postcode:postcode,method_contact:method_contact,best_time:best_time,liquid_capital:liquid_capital,timeframe:timeframe,preferred_location:preferred_location,create_account:create_account,newsletter:newsletter,},cache:false,success:function(){$('#contactForm2').trigger("reset");setTimeout(function(){window.location.replace("enquiry_sent");},10);},error:function(){$('#success').html("<div class='alert alert-danger'>");$('#success > .alert-danger').html("<button type='button' class='close' data-dismiss='alert' aria-hidden='true'>&times;").append("</button>");$('#success > .alert-danger').append("<strong>Sorry "+firstName+", it seems that my mail server is not responding. Please try again later!");$('#success > .alert-danger').append('</div>');$('#contactForm2').trigger("reset");},})},filter:function(){return $(this).is(":visible");}});}});
